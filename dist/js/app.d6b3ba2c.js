(function(){"use strict";var t={768:function(t,e,i){var s=i(144),o=i(69),n=i(17),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("div",[e("b-navbar",{attrs:{toggleable:"sm",type:"light",variant:"success"}},[e("b-navbar-brand",{attrs:{to:"/"}},[t._v("Home")]),e("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),e("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[e("b-navbar-nav",[e("b-nav-item",{attrs:{to:"/activities"}},[t._v("Activities")]),e("b-nav-item",{attrs:{to:"/suggestions"}},[t._v("Suggestions")])],1),e("b-navbar-nav",{staticClass:"ml-auto"},[e("b-navbar-nav",{staticClass:"ml-auto navbar_right"},[t.token?t._e():e("b-nav-item",{attrs:{to:"/register"}},[t._v("Register")]),t.token?e("b-nav-item",{on:{click:function(e){return t.logout()}}},[t._v("Log Out")]):e("b-nav-item",{attrs:{to:"/login"}},[t._v("Log In")])],1)],1)],1)],1)],1),e("router-view")],1)},a=[],l=i(629),u={name:"App",computed:{...(0,l.rn)(["token"])},methods:{...(0,l.OI)(["removeToken","setToken"]),...(0,l.nv)(["fetchActivities","fetchUserRelations","fetchRelations"]),logout(){this.removeToken()}},mounted(){this.fetchActivities(),localStorage.token&&this.setToken(localStorage.token)},sockets:{error(t){alert(t)}}},c=u,m=i(1),p=(0,m.Z)(c,r,a,!1,null,null,null),d=p.exports,v=i(345),g=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("Header"),e("img",{attrs:{src:"https://svdpli.org/wp-content/uploads/2022/04/iStock-1303107115-1-1-1024x683.jpg",width:"600",alt:"Logo"}})],1)},f=[],h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"naslov"},[e("h1",[t._v("Volunteer Service")]),t.subtitle?e("h2",[t._v(t._s(t.subtitle))]):t._e()])},b=[],_={name:"Header",props:{subtitle:String}},k=_,y=(0,m.Z)(k,h,b,!1,null,"406a618e",null),S=y.exports,x={name:"Home",components:{Header:S},computed:{...(0,l.rn)(["token","flag"])},methods:{...(0,l.nv)(["fetchUserRelations","fetchRelations"])},mounted(){this.token&&!this.flag&&(this.fetchRelations(),this.fetchUserRelations())}},w=x,P=(0,m.Z)(w,g,f,!1,null,null,null),R=P.exports,O=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("Header",{attrs:{subtitle:"Activities"}}),e("ActivitiesList")],1)},j=[],A=function(){var t=this,e=t._self._c;return e("div",[e("b-pagination",{attrs:{"total-rows":t.activities.length,"per-page":t.perPage,"aria-controls":"activities-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),e("b-table",{attrs:{id:"activities-table",hover:"",fixed:"",items:t.activities,fields:t.fields,small:"","per-page":t.perPage,"current-page":t.currentPage},on:{"row-clicked":t.rowClicked}}),e("b-pagination",{attrs:{"total-rows":t.activities.length,"per-page":t.perPage,"aria-controls":"activities-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},C=[],$={name:"ActivitiesList",data(){return{fields:["name","organisation","date","location"],currentPage:1,perPage:5}},computed:{...(0,l.rn)(["activities"])},methods:{rowClicked(t,e){this.$router.push({name:"Single",params:{id:t.id}})}}},T=$,Z=(0,m.Z)(T,A,C,!1,null,"648d87c6",null),E=Z.exports,L={name:"Activities",components:{Header:S,ActivitiesList:E},methods:{}},q=L,H=(0,m.Z)(q,O,j,!1,null,"5ac90bdc",null),U=H.exports,I=function(){var t=this,e=t._self._c;return e("div",[t.activity?e("Header",{attrs:{subtitle:t.name}}):t._e(),t.activity?e("Activity",{attrs:{activity:t.activity}}):t._e()],1)},N=[],D=function(){var t=this,e=t._self._c;return e("div",[e("p",[t._v("Organisation: "+t._s(t.activity.organisation))]),e("p",[t._v("Date: "+t._s(t.activity.date))]),e("p",[t._v("Time: "+t._s(t.activity.time))]),e("p",[t._v("Location: "+t._s(t.activity.location))]),e("p",[t._v("Description: "+t._s(t.activity.description))]),e("br"),t.token?e("div",[t.relation?e("div",[e("p",[t._v("Prijavljeni ste na ovu aktivnost")]),e("b-icon",{attrs:{icon:"check-square",variant:"success",scale:"2"}}),e("br"),e("br"),e("p",[e("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:t.signOut}},[t._v("Odjavi se")])],1)],1):e("div",[e("p",[t._v("Niste prijavljeni na ovu aktivnost")]),e("b-icon",{attrs:{icon:"x-circle",variant:"danger",scale:"2"}}),e("br"),e("br"),e("p",[e("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:t.signIn}},[t._v("Prijavi se")])],1)],1),e("h3",[t._v("Prijavljeni korisnici: ")]),0!=t.activities[t.id]["relations"].length?e("ul",t._l(t.activities[t.id]["relations"],(function(i){return e("li",{key:i.id},[t._v(t._s(i.users.username))])})),0):t._e()]):t._e()])},B=[],z={name:"Activity",props:{activity:Object},computed:{...(0,l.rn)(["token","userRelations","activities"]),id:function(){const t=this.activities.filter((t=>t.id==this.$route.params.id))[0];var e=this.activities.indexOf(t);return e}},data(){return{relation:!1}},methods:{...(0,l.nv)(["fetchSingleRelation","postSingleRelation","deleteSingleRelation"]),signIn(){this.postSingleRelation(this.$route.params.id).then((t=>{0==t.length?this.relation=!1:this.relation=!0}))},signOut(){this.deleteSingleRelation(this.$route.params.id).then((t=>{this.relation=!t}))}},mounted(){if(this.token){const t=this.userRelations.filter((t=>t.activityId==this.$route.params.id))[0];this.relation=t||!1}}},F=z,J=(0,m.Z)(F,D,B,!1,null,"7db1326b",null),M=J.exports,G={name:"Single",components:{Header:S,Activity:M},data(){return{activity:null,name:""}},methods:{...(0,l.nv)(["getActivityByID"])},mounted(){this.getActivityByID(this.$route.params.id).then((t=>{this.activity=t,this.name=t.name}))}},V=G,X=(0,m.Z)(V,I,N,!1,null,null,null),Y=X.exports,K=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("Header",{attrs:{subtitle:"User suggestions"}}),e("SuggestionsList"),e("SuggestionForm")],1)},Q=[],W=function(){var t=this,e=t._self._c;return e("div",t._l(t.suggestions,(function(i){return e("b-card",{key:i.id,attrs:{title:i.name,"sub-title":i.role}},[e("b-card-text",[t._v(" Description: "+t._s(i.description)+" ")]),e("b-card-text",[t._v(" Location: "+t._s(i.location)+" ")]),e("b-card-text",[t._v(" Purpose: "+t._s(i.purpose)+" ")]),e("b-card-text",[t._v(" Created by: "+t._s(i.user.username)+" ")])],1)})),1)},tt=[],et={name:"SuggestionsList",computed:{...(0,l.rn)(["suggestions"])}},it=et,st=(0,m.Z)(it,W,tt,!1,null,"f6e13a54",null),ot=st.exports,nt=function(){var t=this,e=t._self._c;return e("div",[e("h2",[t._v("Create a suggestion")]),t.token?e("div",[e("div",{staticClass:"form-group row"},[e("div",{staticClass:"col-6"},[e("label",{attrs:{for:"ex1"}},[t._v("Name")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.suggestion.name,expression:"suggestion.name"}],staticClass:"form-control",attrs:{id:"cr1",type:"text",required:""},domProps:{value:t.suggestion.name},on:{input:function(e){e.target.composing||t.$set(t.suggestion,"name",e.target.value)}}})]),e("div",{staticClass:"col-6"},[e("label",{attrs:{for:"ex2"}},[t._v("Location")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.suggestion.location,expression:"suggestion.location"}],staticClass:"form-control",attrs:{id:"cr2",type:"text",required:""},domProps:{value:t.suggestion.location},on:{input:function(e){e.target.composing||t.$set(t.suggestion,"location",e.target.value)}}})])]),e("div",{staticClass:"form-group row"},[e("div",{staticClass:"col-6"},[e("label",{attrs:{for:"ex3"}},[t._v("Purpose")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.suggestion.purpose,expression:"suggestion.purpose"}],staticClass:"form-control",attrs:{id:"cr3",name:"purpose",rows:"5",required:""},domProps:{value:t.suggestion.purpose},on:{input:function(e){e.target.composing||t.$set(t.suggestion,"purpose",e.target.value)}}})]),e("div",{staticClass:"col-6"},[e("label",{attrs:{for:"ex3"}},[t._v("Role")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.suggestion.role,expression:"suggestion.role"}],staticClass:"form-control",attrs:{id:"cr4",name:"role",rows:"5",required:""},domProps:{value:t.suggestion.role},on:{input:function(e){e.target.composing||t.$set(t.suggestion,"role",e.target.value)}}})])]),e("div",{staticClass:"form-group row"},[e("div",{staticClass:"col-6"},[e("label",{attrs:{for:"ex3"}},[t._v("Description")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.suggestion.description,expression:"suggestion.description"}],staticClass:"form-control",attrs:{id:"cr5",name:"description",rows:"4",required:""},domProps:{value:t.suggestion.description},on:{input:function(e){e.target.composing||t.$set(t.suggestion,"description",e.target.value)}}})]),e("div",{staticClass:"col-4"},[e("div",{staticClass:"form-text",attrs:{id:"tekst"}},[t._v("All fields must be filled in")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button",id:"btn1"},on:{click:t.submit}},[t._v("Create")])])])]):e("p",[t._v("You must be signed in to create a suggestion")])])},rt=[],at={name:"SuggestionForm",data(){return{suggestion:{name:"",location:"",purpose:"",role:"",description:""}}},computed:{...(0,l.rn)(["token"])},methods:{...(0,l.nv)(["postSuggestion"]),submit(t){t.preventDefault(),this.$socket.emit("suggestion",{suggestion:this.suggestion,token:this.token}),this.suggestion.name="",this.suggestion.location="",this.suggestion.purpose="",this.suggestion.role="",this.suggestion.description=""}}},lt=at,ut=(0,m.Z)(lt,nt,rt,!1,null,"41d462ed",null),ct=ut.exports,mt={name:"Suggestions",components:{Header:S,SuggestionsList:ot,SuggestionForm:ct},methods:{...(0,l.nv)(["fetchSuggestions"])},mounted(){this.fetchSuggestions()}},pt=mt,dt=(0,m.Z)(pt,K,Q,!1,null,null,null),vt=dt.exports,gt=function(){var t=this,e=t._self._c;return e("div",[e("b-form",{on:{submit:t.onSubmit}},[e("b-form-group",{attrs:{label:"Username:","label-for":"username"}},[e("b-form-input",{attrs:{id:"username",placeholder:"Enter username",required:""},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),e("b-form-group",{attrs:{label:"Password:","label-for":"password"}},[e("b-form-input",{attrs:{id:"password",type:"password",placeholder:"Enter password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),e("br"),e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)],1)},ft=[],ht={name:"Login",data(){return{form:{username:"",password:""}}},methods:{...(0,l.nv)(["login"]),onSubmit(t){t.preventDefault(),this.login(this.form),this.form.username="",this.form.password=""}}},bt=ht,_t=(0,m.Z)(bt,gt,ft,!1,null,null,null),kt=_t.exports,yt=function(){var t=this,e=t._self._c;return e("div",[e("b-form",{on:{submit:t.onSubmit}},[e("b-form-group",{attrs:{label:"Name:","label-for":"name"}},[e("b-form-input",{attrs:{id:"name",placeholder:"Enter name",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("br"),e("b-form-group",{attrs:{label:"Surname:","label-for":"surname"}},[e("b-form-input",{attrs:{id:"surname",placeholder:"Enter surname",required:""},model:{value:t.form.surname,callback:function(e){t.$set(t.form,"surname",e)},expression:"form.surname"}})],1),e("br"),e("b-form-group",{attrs:{label:"Username:","label-for":"username"}},[e("b-form-input",{attrs:{id:"username",placeholder:"Enter username",required:""},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),e("br"),e("b-form-group",{attrs:{label:"Email address:","label-for":"email"}},[e("b-form-input",{attrs:{id:"email",type:"email",placeholder:"Enter email",required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),e("br"),e("b-form-group",{attrs:{label:"Password:","label-for":"password"}},[e("b-form-input",{attrs:{id:"password",type:"password",placeholder:"Enter password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),e("b-form-group",{attrs:{label:"Gender:","label-for":"gender"}},[e("b-form-input",{attrs:{id:"gender",placeholder:"Enter gender",required:""},model:{value:t.form.gender,callback:function(e){t.$set(t.form,"gender",e)},expression:"form.gender"}})],1),e("br"),e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)],1)},St=[],xt={name:"Register",components:{Header:S},data(){return{form:{name:"",surname:"",username:"",password:"",email:"",gender:""}}},methods:{...(0,l.nv)(["register"]),onSubmit(t){t.preventDefault(),this.register(this.form),this.form.name="",this.form.surname="",this.form.username="",this.form.password="",this.form.email="",this.form.gender=""}}},wt=xt,Pt=(0,m.Z)(wt,yt,St,!1,null,null,null),Rt=Pt.exports;s["default"].use(v.Z);const Ot=[{path:"/",name:"Home",component:R},{path:"/activities",name:"Activities",component:U},{path:"/activity/:id",name:"Single",component:Y},{path:"/suggestions",name:"Suggestions",component:vt},{path:"/login",name:"Login",component:kt},{path:"/register",name:"Register",component:Rt}],jt=new v.Z({mode:"history",base:"/",routes:Ot});var At=jt;s["default"].use(l.ZP);var Ct=new l.ZP.Store({state:{activities:[],suggestions:[],userRelations:[],token:"",flag:!1},mutations:{addActivities(t,e){t.activities=e},addActivity(t,e){t.activities.push(e)},addSuggestions(t,e){t.suggestions=e},pushSuggestion(t,e){t.suggestions.push(e)},setUserRelations(t,e){t.userRelations=e},addUserRelation(t,e){t.userRelations.push(e)},setFlag(t){t.flag=!0},addRelation(t,e){const i=t.activities.filter((t=>t.id==e.id))[0];var s=t.activities.indexOf(i);s>-1&&t.activities[s]["relations"].push(e.relation)},removeRelation(t,e){const i=t.activities.filter((t=>t.id==e.id))[0];var s=t.activities.indexOf(i);const o=t.activities[s]["relations"].filter((t=>t.id==e.relation.id))[0];var n=t.activities[s]["relations"].indexOf(o);n>-1&&t.activities[s]["relations"].splice(n,1)},removeUserRelation(t,e){const i=t.userRelations.filter((t=>t.activityId==e.activityId))[0];var s=t.userRelations.indexOf(i);s>-1&&t.userRelations.splice(s,1)},setToken(t,e){t.token=e,localStorage.token=e,At.push({name:"Home"})},removeToken(t){t.token="",localStorage.token="",t.userRelations=[],t.relations=[],t.flag=!1}},actions:{fetchActivities({commit:t}){fetch("https://volonterskiapi.herokuapp.com/api/activities").then((t=>t.json())).then((e=>{t("addActivities",e)}))},getActivityByID({commit:t,state:e},i){return new Promise(((s,o)=>{const n=e.activities.filter((t=>t.id==i))[0];n?s(n):fetch("https://volonterskiapi.herokuapp.com/api/activities/"+i).then((t=>t.json())).then((e=>{t("addActivity",e),s(e)}))}))},fetchSuggestions({commit:t}){fetch("https://volonterskiapi.herokuapp.com/api/user_suggestions").then((t=>t.json())).then((e=>t("addSuggestions",e)))},postSuggestion({commit:t,state:e},i){fetch("https://volonterskiapi.herokuapp.com/api/user_suggestions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.token}`},body:JSON.stringify(i)}).then((t=>t.json())).then((e=>{null!=e?t("pushSuggestion",e):alert("Invalid credentials")}))},fetchRelations({commit:t,state:e}){fetch("https://volonterskiapi.herokuapp.com/api/relations_api",{headers:{Authorization:`Bearer: ${e.token}`}}).then((t=>t.json())).then((t=>{e.activities.forEach((e=>{e["relations"]=[],t.forEach((t=>{e.id==t.activityId&&e["relations"].push(t)}))}))}))},fetchSingleRelation({commit:t,state:e},i){return new Promise(((t,s)=>{fetch("https://volonterskiapi.herokuapp.com/api//relations_activity_single/"+i,{headers:{Authorization:`Bearer ${e.token}`}}).then((t=>t.json())).then((e=>{t(e)}))}))},postSingleRelation({commit:t,state:e},i){return new Promise(((s,o)=>{fetch("https://volonterskiapi.herokuapp.com/api//relations_activity_post/"+i,{method:"POST",headers:{Authorization:`Bearer ${e.token}`}}).then((t=>t.json())).then((e=>{t("addUserRelation",e),t("addRelation",{relation:e,id:i}),s(e)}))}))},deleteSingleRelation({commit:t,state:e},i){return new Promise(((s,o)=>{fetch("https://volonterskiapi.herokuapp.com/api/users_activities_single/"+i,{method:"DELETE",headers:{Authorization:`Bearer ${e.token}`}}).then((t=>t.json())).then((e=>{t("removeRelation",{relation:e,id:i}),t("removeUserRelation",e),s(e)}))}))},fetchUserRelations({commit:t,state:e}){fetch("https://volonterskiapi.herokuapp.com/api//user_relations_api",{headers:{Authorization:`Bearer ${e.token}`}}).then((t=>t.json())).then((e=>{t("setFlag"),t("setUserRelations",e)}))},login({commit:t},e){fetch("https://volonterskiauth.herokuapp.com/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((e=>{e.msg?alert(e.msg):t("setToken",e.token)}))},register({commit:t},e){fetch("https://volonterskiauth.herokuapp.com/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((e=>{e.msg?alert(e.msg):t("setToken",e.token)}))},socket_suggestion({commit:t},e){const i=JSON.parse(e);t("pushSuggestion",i)}}}),$t=i(445),Tt=i.n($t);i(24);s["default"].config.productionTip=!1,s["default"].use(o.XG7),s["default"].use(n.A7),s["default"].use(new(Tt())({debug:!1,connection:"https://volonterskiapp.herokuapp.com",vuex:{store:Ct,actionPrefix:"socket_"}})),new s["default"]({router:At,store:Ct,render:function(t){return t(d)}}).$mount("#app")}},e={};function i(s){var o=e[s];if(void 0!==o)return o.exports;var n=e[s]={exports:{}};return t[s].call(n.exports,n,n.exports,i),n.exports}i.m=t,function(){var t=[];i.O=function(e,s,o,n){if(!s){var r=1/0;for(c=0;c<t.length;c++){s=t[c][0],o=t[c][1],n=t[c][2];for(var a=!0,l=0;l<s.length;l++)(!1&n||r>=n)&&Object.keys(i.O).every((function(t){return i.O[t](s[l])}))?s.splice(l--,1):(a=!1,n<r&&(r=n));if(a){t.splice(c--,1);var u=o();void 0!==u&&(e=u)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[s,o,n]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var o,n,r=s[0],a=s[1],l=s[2],u=0;if(r.some((function(e){return 0!==t[e]}))){for(o in a)i.o(a,o)&&(i.m[o]=a[o]);if(l)var c=l(i)}for(e&&e(s);u<r.length;u++)n=r[u],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return i.O(c)},s=self["webpackChunkfe"]=self["webpackChunkfe"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(768)}));s=i.O(s)})();
//# sourceMappingURL=app.d6b3ba2c.js.map